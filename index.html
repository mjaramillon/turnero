<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi DashCast Personal</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; }
        #cast-button { margin-bottom: 20px; }
        input { padding: 10px; width: 300px; }
        button { padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>

    <h1>Enviar URL a Chromecast</h1>
    
    <google-cast-launcher id="cast-button"></google-cast-launcher>
    
    <br>
    
    <input type="url" id="urlInput" placeholder="https://ejemplo.com" value="https://www.wikipedia.org">
    <button id="sendBtn">Enviar a Pantalla</button>

    <script src="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1"></script>

    <script>
        // Configuración inicial con tu Application ID
        window.__onGCastApiAvailable = function(isAvailable) {
            if (isAvailable) {
                initializeCastApi();
            }
        };

        function initializeCastApi() {
            cast.framework.CastContext.getInstance().setOptions({
                receiverApplicationId: 'B01CDD80', // Tu ID proporcionado
                autoJoinPolicy: chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED
            });
        };

        // Función para enviar el contenido
        document.getElementById('sendBtn').addEventListener('click', () => {
            const urlToSend = document.getElementById('urlInput').value;
            const castSession = cast.framework.CastContext.getInstance().getCurrentSession();

            if (castSession) {
                const mediaInfo = new chrome.cast.media.MediaInfo(urlToSend, 'text/html');
                const request = new chrome.cast.media.LoadRequest(mediaInfo);
                
                castSession.loadMedia(request).then(
                    () => { console.log('URL enviada con éxito'); },
                    (errorCode) => { console.error('Error al enviar:', errorCode); }
                );
            } else {
                alert('Primero conéctate al Chromecast usando el botón de arriba.');
            }
        });
    </script>
</body>
</html>
